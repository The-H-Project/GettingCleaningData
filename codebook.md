---

Title: Cookbook for Cousera Getting and Cleaning Data Course Project
Date: 24 October 2015
---

## Project Description
This cookbook describes:
-  the 'Human Activity Recognition Using Smartphones Dataset' used by the Course Project
-  the data load, extraction, and transformation process used by **run_analysis.R**
- the output product generated by run_analysis.R

## Original Dataset Source & License
This project uses the 'Human Activity Recognition Using Smartphones Dataset' at: https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip  

A background description for this dataset is at: http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones  

License Attribution for this dataset is:  
* [1] Davide Anguita, Alessandro Ghio, Luca Oneto, Xavier Parra and Jorge L. Reyes-Ortiz. Human Activity Recognition on Smartphones using a Multiclass Hardware-Friendly Support Vector Machine. International Workshop of Ambient Assisted Living (IWAAL 2012). Vitoria-Gasteiz, Spain. Dec 2012  

* This dataset is distributed AS-IS and no responsibility implied or explicit can be addressed to the authors or their institutions for its use or misuse. Any commercial use is prohibited.  

## Original Data
8 files from three data subsets of the original -- Common Data, Training Dataset, and Test Dataset -- are used in the course project analysis.

### Common Data Used
1. **'./UCI HAR Dataset/features.txt'**: This file is a list of 561 variables that provide 'column headers' to the 'X_train' and 'X_test' files.
2. **'./UCI HAR Dataset/activity_labels.txt'**: This file is a 6-row list that helps map English language descriptors to the values provided in the 'y_train_data' and 'y_test_data' files.

### Training Dataset Used
1. **'./UCI HAR Dataset/train/X_train.txt'**: This main observation file consists of 7,352 rows of observations across 561 variables.
2. **'./UCI HAR Dataset/train/y_train.txt'**: This file   provides 1 column and 7,352 rows that indicates the activity (integer values between 1 and 6) performed for each row of observations in the 'X_train.txt' file.
3. **'./UCI HAR Dataset/train/subject_train.txt'**: This file provides 1 column and 7,352 rows that indicate the participant (integer values between 1 and 30) who performed each row of observations in the 'X_train.txt' file.

### Test Dataset Used
1. **'./UCI HAR Dataset/test/X_test.txt'**: This main observation file consists of 2,947 rows of observations across 561 variables.
2. **'./UCI HAR Dataset/test/y_test.txt'**: This file provides 1 column and 2,947 rows that indicates the activity (integer values 1 to 6) performed for each row of observations in the 'X_test.txt' file.
3. **'./UCI HAR Dataset/test/subject_test.txt'**: This file provides 1 column and 2,947 rows that indicate the participant (integer values between 1 and 30) who performed each row of observations in the 'X_test.txt' file.

### Unused Data

The files contained in the 'Inertial' folders of the Training and Test datasets are unused in this analysis. Each 'Inertial' folder contains 9 files in groupings of 3 for X-, Y-, and Z-axis data for Body Acceleration, Total Acceleration, and Angular Velocity.

Each file consists of 128 columns of data; the Training Inertial data files have 7,352 rows, the Test Inertial data files have 2,947 rows each.

Column headers were not provided for the Inertial data files, making it difficult to assess how the data fit together.

## Course Project Exercise: run_analysis.R  

### I.  Dataset Preparation (Create 'Combined' Dataset)

The eight files as described in 'Original Data Used' section are combined into one 'combined' dataset:
- All 8 files are loaded into R, mainly through data.table's fread.
- Columns headers are assigned to the 'X_train.txt' and 'X_test.txt' files from the 'features.txt' file. Column headers are programmatically assigned to the 'y_train.txt', 'y_test.txt', 'subject_train.txt', and 'subject_test' files.
- The 'train' dataset is created by column binding the 'X_train.txt', 'y_train.txt', and 'subject_train.txt' files.
- The 'test' dataset is created by column binding the 'X_test.txt', 'y_test.txt', and 'subject_test.txt' files.
- The 'combined' dataset is created by row binding the 'train' and 'test' datasets.

The 'combined' dataset consists of 563 columns and 10,299 rows.

### II. Tidy Dataset
The 'tidy data set' variable requirement for the project are for the selection of mean and standard deviation measurements. 66 of the 561 variables in the combined dataset meet this requirement. These variables have a 'mean()' or 'std()' in the variable name.

Variables that did not meet the project requirement include 'meanFreq' variables, which consist of weighted average (as opposed to arithmetic average) values; and 'angle' variables, which measure the angle between two vectors.

No attempts were made to decompose / melt the variables of the original dataset, which would have created a narrower, but longer dataset. The community course notes for the assignment (https://thoughtfulbloke.wordpress.com/2015/09/09/getting-and-cleaning-the-assignment/) suggest that there is no benefit to do to so.

The 'tidy data set' consists of 68 columns and 10,299 rows.

### III. Summary Dataset (Course Project Output)
The 'summary dataset' (the output requirement of the course project) is a table of summarized means for all variables of the tidy data set, organized by Participant and Activity. This dataset is created by dcast.data.table.

This summary dataset is equivalent to a Microsoft Excel pivot table of the tidy data set, set to average all measurement variables.

The 'summary dataset' consists of 68 columns and 180 rows.

### Output File and Schema
The output product is text file 'output.txt', which is placed into the current working directory.

There are 68 variables in the output file.

The first two variables are 'Participant' and 'Activity':
- 'Participant': An integer value between 1 and 30, identifying the specific participant who generated the data.
- 'Activity': One of six possible activities that the participant performed to generate the data -- laying, standing, walking, walking downstairs, and walking upstairs.

The remaining 66 variables are cross-tabulated averages of the corresponding values in the tidy dataset, by Participant and Activity. The variables have four-part names:
1. Measurement Domain: 't' for time, or 'f' for frequency  
2. Signal Measurement:
  * 'BodyAcc': 'body acceleration signal obtained by subtracting the gravity from the total acceleration'
  * 'BodyGyro: 'angular velocity vector measured by the gyroscope for each window sample. The units are radians/second.'
3. Central Tendency / Dispersion Measurement: Indicates whether the measurement is a mean or standard deviation calculation.
4. Axial Direction: X, Y, or Z axial directions.

The 66 variables are as follows:  
| Output Data File          | Tidy Data Set and Original Data Set |  
|:--------------------------|:-----------------------------------:|  
| tBodyAcc-mean-X           |          tBodyAcc-mean()-X          |  
| tBodyAcc-mean-Y           |          tBodyAcc-mean()-Y          |  
| tBodyAcc-mean-Z           |          tBodyAcc-mean()-Z          |  
| tBodyAcc-std-X            |          tBodyAcc-std()-X           |  
| tBodyAcc-std-Y            |          tBodyAcc-std()-Y           |  
| tBodyAcc-std-Z            |          tBodyAcc-std()-Z           |  
| tGravityAcc-mean-X        |        tGravityAcc-mean()-X         |  
| tGravityAcc-mean-Y        |        tGravityAcc-mean()-Y         |  
| tGravityAcc-mean-Z        |        tGravityAcc-mean()-Z         |  
| tGravityAcc-std-X         |         tGravityAcc-std()-X         |  
| tGravityAcc-std-Y         |         tGravityAcc-std()-Y         |  
| tGravityAcc-std-Z         |         tGravityAcc-std()-Z         |  
| tBodyAccJerk-mean-X       |        tBodyAccJerk-mean()-X        |  
| tBodyAccJerk-mean-Y       |        tBodyAccJerk-mean()-Y        |  
| tBodyAccJerk-mean-Z       |        tBodyAccJerk-mean()-Z        |  
| tBodyAccJerk-std-X        |        tBodyAccJerk-std()-X         |  
| tBodyAccJerk-std-Y        |        tBodyAccJerk-std()-Y         |  
| tBodyAccJerk-std-Z        |        tBodyAccJerk-std()-Z         |  
| tBodyGyro-mean-X          |         tBodyGyro-mean()-X          |  
| tBodyGyro-mean-Y          |         tBodyGyro-mean()-Y          |  
| tBodyGyro-mean-Z          |         tBodyGyro-mean()-Z          |  
| tBodyGyro-std-X           |          tBodyGyro-std()-X          |  
| tBodyGyro-std-Y           |          tBodyGyro-std()-Y          |  
| tBodyGyro-std-Z           |          tBodyGyro-std()-Z          |  
| tBodyGyroJerk-mean-X      |       tBodyGyroJerk-mean()-X        |  
| tBodyGyroJerk-mean-Y      |       tBodyGyroJerk-mean()-Y        |  
| tBodyGyroJerk-mean-Z      |       tBodyGyroJerk-mean()-Z        |  
| tBodyGyroJerk-std-X       |        tBodyGyroJerk-std()-X        |  
| tBodyGyroJerk-std-Y       |        tBodyGyroJerk-std()-Y        |  
| tBodyGyroJerk-std-Z       |        tBodyGyroJerk-std()-Z        |  
| tBodyAccMag-mean          |         tBodyAccMag-mean()          |  
| tBodyAccMag-std           |          tBodyAccMag-std()          |  
| tGravityAccMag-mean       |        tGravityAccMag-mean()        |  
| tGravityAccMag-std        |        tGravityAccMag-std()         |  
| tBodyAccJerkMag-mean      |       tBodyAccJerkMag-mean()        |  
| tBodyAccJerkMag-std       |        tBodyAccJerkMag-std()        |  
| tBodyGyroMag-mean         |         tBodyGyroMag-mean()         |  
| tBodyGyroMag-std          |         tBodyGyroMag-std()          |  
| tBodyGyroJerkMag-mean     |       tBodyGyroJerkMag-mean()       |  
| tBodyGyroJerkMag-std      |       tBodyGyroJerkMag-std()        |  
| fBodyAcc-mean-X           |          fBodyAcc-mean()-X          |  
| fBodyAcc-mean-Y           |          fBodyAcc-mean()-Y          |  
| fBodyAcc-mean-Z           |          fBodyAcc-mean()-Z          |  
| fBodyAcc-std-X            |          fBodyAcc-std()-X           |  
| fBodyAcc-std-Y            |          fBodyAcc-std()-Y           |  
| fBodyAcc-std-Z            |          fBodyAcc-std()-Z           |  
| fBodyAccJerk-mean-X       |        fBodyAccJerk-mean()-X        |  
| fBodyAccJerk-mean-Y       |        fBodyAccJerk-mean()-Y        |  
| fBodyAccJerk-mean-Z       |        fBodyAccJerk-mean()-Z        |  
| fBodyAccJerk-std-X        |        fBodyAccJerk-std()-X         |  
| fBodyAccJerk-std-Y        |        fBodyAccJerk-std()-Y         |  
| fBodyAccJerk-std-Z        |        fBodyAccJerk-std()-Z         |  
| fBodyGyro-mean-X          |         fBodyGyro-mean()-X          |  
| fBodyGyro-mean-Y          |         fBodyGyro-mean()-Y          |  
| fBodyGyro-mean-Z          |         fBodyGyro-mean()-Z          |  
| fBodyGyro-std-X           |          fBodyGyro-std()-X          |  
| fBodyGyro-std-Y           |          fBodyGyro-std()-Y          |  
| fBodyGyro-std-Z           |          fBodyGyro-std()-Z          |  
| fBodyAccMag-mean          |         fBodyAccMag-mean()          |  
| fBodyAccMag-std           |          fBodyAccMag-std()          |  
| fBodyBodyAccJerkMag-mean  |     fBodyBodyAccJerkMag-mean()      |  
| fBodyBodyAccJerkMag-std   |      fBodyBodyAccJerkMag-std()      |  
| fBodyBodyGyroMag-mean     |       fBodyBodyGyroMag-mean()       |  
| fBodyBodyGyroMag-std      |       fBodyBodyGyroMag-std()        |  
| fBodyBodyGyroJerkMag-mean |     fBodyBodyGyroJerkMag-mean()     |  
| fBodyBodyGyroJerkMag-std  |     fBodyBodyGyroJerkMag-std()      |  